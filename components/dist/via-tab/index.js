Component({externalClasses:["class-tab","class-active-tab","class-line"],properties:{tabs:{type:Array,value:[]},selectColor:{type:String,value:""},activeTab:{type:Number,value:0}},observers:{activeTab(e){this.setData({curentIndex:e})}},data:{curentIndex:0,transformX:0},methods:{handleTabClick(e){const{tabs:t,curentIndex:s}=this.data,{index:a}=e.currentTarget.dataset;s!=a&&this.setData({curentIndex:a},(()=>{this.data.tabs.length>5&&this.queryMultipleNodes(),this.triggerEvent("onChange",{...t[a],index:a})}))},queryMultipleNodes(){this.getRect(".mp-tab-item",!0).then((e=>{this.queryScrollNode(e)}))},queryScrollNode(e,t="width"){const{curentIndex:s}=this.data,a=e.find((({dataset:{index:e}})=>e==s)).dataset.index,n=e[a];this.getRect(".mp-scroll-view-box").then((s=>{const r=s[t];let i=e.slice(0,a).reduce(((e,s)=>e+s[t]),0);i+=(n[t]-r)/2,"width"===t&&this.setData({transformX:i})}))},getRect(e,t=!1){return new Promise(((s,a)=>{const n=wx.createSelectorQuery().in(this);(t?n.selectAll(e):n.select(e)).boundingClientRect((e=>{if(!e)return a("找不到元素");s(e)})).exec()}))}}});