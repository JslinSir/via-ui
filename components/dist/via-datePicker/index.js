Component({options:{multipleSlots:!0},externalClasses:["class-header-title"],properties:{title:String,value:{type:Array,value:[]},beginRange:{type:Number,value:2},endRange:{type:Number,value:2},maskClose:{type:Boolean,value:!0},cancelTex:{type:String,value:"取消"},confirmTex:{type:String,value:"确认"},texSize:{type:Number,value:32},cancelColor:{type:String,value:"#333"},confirmColor:{type:String,value:"#0a1d66"},isShowYearUnit:{type:Boolean,value:!1},isUnitZero:{type:Boolean,value:!1}},data:{years:[],months:[],days:[],selectedValue:[],forbidden:null},observers:{},attached(){this.$popModal=this.selectComponent("#pop-modal")},methods:{show(){const e=[];this.confimValue=[];const t=new Date,{beginRange:a,endRange:s}=this.data;for(let i=t.getFullYear()-a;i<=t.getFullYear()+s;i++)e.push(i);this.$popModal.show(),this.setData({years:e}),this._setPickerData(),this.pickerStatus=!1},_setPickerData(){const e=new Date,t=this.properties.value,a=t[0]?parseInt(t[0]):e.getFullYear(),s=t[1]?parseInt(t[1]):e.getMonth()+1,i=t[2]?parseInt(t[2]):e.getDate();this.year=a,this.month=s;const n=this._setMonths(12),o=this._setDays(a,s),l=this.data.years.indexOf(a),h=n.indexOf(s),r=o.indexOf(i);this.confimValue=[a,s,i],this.setData({months:n,days:o},(()=>{this.setData({value:[a,s,i],selectedValue:[l,h,r]})}))},_setMonths(e){const t=[];for(let a=1;a<=e;a++){let e=0;e=this.data.isUnitZero&&a<10?"0"+a:a,t.push(e)}return t},_setDays(e,t){const a=[];t=parseInt(t,10);new Date;const s=new Date(e,t,0).getDate();for(let e=1;e<=s;e++){let t=0;t=this.data.isUnitZero&&e<10?"0"+e:e,a.push(t)}return a},dateChangeStart(){this.pickerStatus=!0,this.setData({forbidden:"forbidden"})},dateChangeEnd(){setTimeout((()=>{this.pickerStatus=!1,this.setData({forbidden:null})}),100)},dateChange(e){const t=e.detail.value,a=this.data.years[t[0]];let s=t[1]+1,i=t[2]+1;this.year!==a&&(s=1,i=1),this.month!==s&&(i=1),this.setData({value:[a,s,i]},(()=>{this._setPickerData();const e=this.confimValue[1]<10?`0${this.confimValue[1]}`:this.confimValue[1],t=this.confimValue[2]<10?`0${this.confimValue[2]}`:this.confimValue[2];this.triggerEvent("onChange",{value:[this.confimValue[0],e,t]})}))},handlePopClose(){this.triggerEvent("onClose")},handleConfirm(e){if(!1===this.pickerStatus){const e=this.confimValue[1]<10?`0${this.confimValue[1]}`:this.confimValue[1],t=this.confimValue[2]<10?`0${this.confimValue[2]}`:this.confimValue[2];this.$popModal.hide(),this.resetDate(),this.triggerEvent("onConfirm",{value:[this.confimValue[0],e,t]})}},resetDate(e){this.setData({years:[],months:[],days:[],selectedValue:[]},(()=>{"function"==typeof e&&e()}))}}});