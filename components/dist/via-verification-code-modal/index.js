import{createArray}from"../utils/base";Component({behaviors:[],properties:{time:{type:Number,value:60},title:{type:String,value:"请填写手机短信验证码"},phone:{type:String,value:""},msglen:{type:Number|String,value:6}},data:{status:!1,codes:[],codesLengthArray:createArray(6)},observers:{msglen(t){if(t){const e=createArray(Number(t));this.setData({codesLengthArray:e})}}},lifetimes:{created(){},attached(){this.$modal=this.selectComponent("#pop-modal")},moved(){},detached(){clearInterval(this._interval)}},methods:{show(){this.$modal.show(),this.setData({status:!0,value:"",codes:[]}),this.runCutdown()},hide(){clearInterval(this._interval),this.$modal.hide(),this.setData({status:!1})},runCutdown(){const{time:t}=this.properties;let e=t-1;this.setData({curentTime:e}),this._interval=setInterval((()=>{const{curentTime:t}=this.data;0!==t?this.setData({curentTime:--e}):clearInterval(this._interval)}),1e3)},handleRequestCodeAgin(){clearInterval(this._interval),this.setData({curentTime:null}),this.triggerEvent("onReFresh")},handleInput(t){const{value:e}=t.detail;this.setData({codes:e.split("")},(()=>{e.length===this.properties.msglen&&this.triggerEvent("onRightInput",e)}))},handleCloseCodeModal(){const{codes:t}=this.data;t&&t.length==this.properties.msglen?(this.triggerEvent("onClose",""),this.hide()):wx.showToast({title:`请输入${this.properties.msglen}位验证码`,icon:"none"})}}});